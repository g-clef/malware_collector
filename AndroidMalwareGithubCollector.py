import git
from malware_collector import MalwareCollector


class AndroidMalwareGithubCollector(MalwareCollector):
    # plan: git sync https://github.com/ashishb/android-malware

    def __init__(self):
        super(AndroidMalwareGithubCollector, self).__init__()
        self.base_path = self.configfile.get("AndroidMalwareGithub", "git_path")

    def get(self):
        # run the git pull to get the most recent data out of the repository
        # note: this assumes that the repo is already set up.
        # returns a boolean of whether anything changed. True = something new is in the repo.
        repo = git.Repo(self.base_path)
        current = repo.head.commit
        repo.remotes.origin.pull()
        return current != repo.head.commit


if __name__ == "__main__":
    android = AndroidMalwareGithubCollector()
    android.get()
